{% extends "base.html" %}

{% block title %}Group: {{group_name}}{% endblock %}

{% block content %}

<h1><a href="../{{group_name}}">{{group_name}}</a>: {{service_name}}</h1>

<div class="services">
<table>
{% for member in members %}
    <tr>
    {% ifnotequal member.0.host_name None %}
		{% ifequal member.0.current_state '0' %}
			<td class="greenbg">
		{% else %}
			{% ifequal member.0.current_state '1' %}
				<td class="yellowbg">
			{% else %}
				<td class="redbg">
        	{% endifequal %}
       	{% endifequal %}
		<h2><a href="../../viewhost/{{member.0.host_name}}">{{member.0.host_name}}</a></h2>
		</td>
	{% else %}
		<td></td>
	{% endifnotequal %}

    {% ifnotequal member.1 None %}
        {% ifequal member.1.graphable true %}
            <td>
                <div class="graph_container">
                    <div class="options">
                        <ul>
                            {# TODO: Find a better way to set selected to match which graph we want? #}
                            <li class="reset selected">live (day)</li>
                            <li class="day">day</li>
                            <li class="week">week</li>
                            <li class="month">month</li>
                            <li class="year">year</li>
                            <li class="zoom" style="visibility: hidden">zoomed</li>
                        </ul>
                    </div>
                    <div class="ajax_info">
                        <div class="update"></div>
                    </div>
                    {# TODO: This has to be one line, as we grab the inner HTML to figure out what to graph, need a solution eventually #}
                    <div id="{{member.1.service_description|slugify}}" 
                         class="graph ajax">{{member.0.host_name}}/{{member.1.service_description}}/{{time_interval.0}}/{{time_interval.1}}/100
                    </div>
                    <div class="legend">
                    </div>
                </div>
            </td>
        {% endifequal %}
	{% endifnotequal %}
    </tr>
{% endfor %}
</table>
</div>
{% endblock %}
